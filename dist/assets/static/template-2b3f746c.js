import{j as r,a as He,d as $e,l as Ve,o as Ge,g as qe}from"./sites-components-8fd6f800.js";import{r as d}from"./index-0cb05a32.js";import{S as ze,i as Ue,L as Ke,b as We,u as Ce,H as Je,c as B,G as je,j as J,k as Ye,d as Ze,l as Qe,M as Xe,a as et}from"./main-b0e00625.js";import{u as R,a as $,F as tt,b as oe,G as st,M as nt,c as rt,d as at,f as it,g as lt,h as ot,L as ct,S as ut,B as dt}from"./GeolocateButton-a88b90ab.js";import{a as ce,u as ft}from"./useMapKey-55309da8.js";import{r as pt}from"./index-7ed968af.js";import"./index-0073c4d1.js";function ht(){return d.useContext(ze).utilities}function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},L.apply(this,arguments)}function re(e,t){if(e==null)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(s=i[n])>=0||(a[s]=e[s]);return a}var D=function(){};function ae(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}var xe=function(){var e=arguments;return function(){var t=arguments;return[].slice.call(e).forEach(function(s){return s&&s.apply(void 0,[].slice.call(t))})}};function mt(e,t){if(e!=null)if(typeof e=="function")e(t);else try{e.current=t}catch{throw new Error('Cannot assign value "'+t+'" to ref "'+e+'"')}}var xt=typeof window<"u"?d.useLayoutEffect:d.useEffect,ie=!1,gt=0,ge=function(){return++gt},vt=["duration","easing","collapseStyles","expandStyles","onExpandStart","onExpandEnd","onCollapseStart","onCollapseEnd","isExpanded","defaultExpanded","hasDisabledAnimation"],yt=["disabled","onClick"],bt=["style","onTransitionEnd","refKey"];function Ct(e){var t,s,n=e===void 0?{}:e,a=n.duration,i=n.easing,l=i===void 0?"cubic-bezier(0.4, 0, 0.2, 1)":i,c=n.collapseStyles,o=c===void 0?{}:c,u=n.expandStyles,f=u===void 0?{}:u,g=n.onExpandStart,m=g===void 0?D:g,h=n.onExpandEnd,x=h===void 0?D:h,p=n.onCollapseStart,y=p===void 0?D:p,F=n.onCollapseEnd,k=F===void 0?D:F,N=n.isExpanded,S=n.defaultExpanded,_=S!==void 0&&S,T=n.hasDisabledAnimation,q=T!==void 0&&T,X=re(n,vt),Y=function(v,C){var j=d.useState(C||!1),I=j[0],M=j[1],A=d.useRef(v!=null),W=A.current?v:I,H=d.useCallback(function(Z){A.current||M(Z)},[]);return d.useEffect(function(){A.current&&v==null,!A.current&&v!=null},[v]),[W,H]}(N,_),O=Y[0],z=Y[1],b=function(v){var C=ie?ge():null,j=d.useState(C),I=j[0],M=j[1];return xt(function(){I===null&&M(ge())},[]),d.useEffect(function(){ie===!1&&(ie=!0)},[]),I!=null?String(I):void 0}(),w=d.useRef(null);t=w,s=function(v){},d.useEffect(function(){s(t)},[t]);var E,ue,ee,U=(X.collapsedHeight||0)+"px",de={display:U==="0px"?"none":"block",height:U,overflow:"hidden"},fe=d.useState(O?{}:de),te=fe[0],Pe=fe[1],se=function(v){pt.flushSync(function(){Pe(v)})},K=function(v){se(function(C){return L({},C,v)})};function pe(v){if(q)return{};var C=a||function(j){if(!j||typeof j=="string")return 0;var I=j/36;return Math.round(10*(4+15*Math.pow(I,.25)+I/5))}(v);return{transition:"height "+C+"ms "+l}}E=function(){requestAnimationFrame(O?function(){m(),K(L({},f,{willChange:"height",display:"block",overflow:"hidden"})),requestAnimationFrame(function(){var v=ae(w);K(L({},pe(v),{height:v}))})}:function(){y();var v=ae(w);K(L({},o,pe(v),{willChange:"height",height:v})),requestAnimationFrame(function(){K({height:U,overflow:"hidden"})})})},ue=[O,U],ee=d.useRef(!0),d.useEffect(function(){if(!ee.current)return E();ee.current=!1},ue);var De=function(v){if(v.target===w.current&&v.propertyName==="height")if(O){var C=ae(w);C===te.height?se({}):K({height:C}),x()}else te.height===U&&(se(de),k())};return{getToggleProps:function(v){var C=v===void 0?{}:v,j=C.disabled,I=j!==void 0&&j,M=C.onClick,A=M===void 0?D:M,W=re(C,yt);return L({type:"button",role:"button",id:"react-collapsed-toggle-"+b,"aria-controls":"react-collapsed-panel-"+b,"aria-expanded":O,tabIndex:0,disabled:I},W,{onClick:I?D:xe(A,function(){return z(function(H){return!H})})})},getCollapseProps:function(v){var C,j=v===void 0?{}:v,I=j.style,M=I===void 0?{}:I,A=j.onTransitionEnd,W=A===void 0?D:A,H=j.refKey,Z=H===void 0?"ref":H,he=re(j,bt);return L({id:"react-collapsed-panel-"+b,"aria-hidden":!O},he,((C={})[Z]=function(){var me=[].slice.call(arguments);return me.every(function(ne){return ne==null})?null:function(ne){me.forEach(function(Be){mt(Be,ne)})}}(w,he[Z]),C.onTransitionEnd=xe(De,W),C.style=L({boxSizing:"border-box"},M,te),C))},isExpanded:O,setExpanded:z}}async function jt(e,t,s=1/0){async function n(u){return await e.verticalSearch({query:"",verticalKey:t,limit:Math.min(s,50),offset:u,retrieveFacets:!1,skipSpellCheck:!0})}const a=await n(0),i=[Promise.resolve(a)],l=50,c=Math.min(a.verticalResults.resultsCount,s);for(let u=a.verticalResults.results.length;u<c;u+=l)i.push(n(u));const o=[];return await Promise.all(i).then(u=>{for(const f of u)o.push(...f.verticalResults.results)}),o}function Nt(e,t,s){var m;const[n,a]=d.useState([]),i=R(),l=$(h=>h),c=!l.query.queryId;d.useEffect(()=>{if(!t||!l.vertical.verticalKey)return;async function h(){const x=await jt(i.core,l.vertical.verticalKey);a(x),s&&s()}h()},[]);const o=$(h=>h.vertical),u=o.results,f=(m=o==null?void 0:o.noResults)==null?void 0:m.allResultsForVertical.results;return c&&t?n:u!=null&&u.length?u:e?f:[]}const[Q,wt]=Ue("Attempted to call useLocator outside of LocatorProvider");const It=[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}],Ft=[{fieldApiName:Ke,entityType:We}],kt=e=>{const{title:t,subTitle:s,placeholderText:n}=e,a=R();return r.jsx("div",{className:"locator-box search-box",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"relative w-full h-9",children:r.jsx(tt,{customCssClasses:{filterSearchContainer:"absolute w-full"},label:"",placeholder:n,searchFields:Ft,onSelect:({currentFilter:i,executeFilterSearch:l,newDisplayName:c,newFilter:o,setCurrentFilter:u})=>{i&&a.setFilterOption({filter:i,selected:!1}),a.setFilterOption({filter:o,displayName:c,selected:!0}),u(o),l(c),a.setOffset(0),a.resetFacets(),oe(a)}})}),r.jsx(st,{className:"ml-0"})]})})},St=e=>{const{result:t}=e,{rawData:s}=t,{address:n,hours:a,slug:i}=s,{relativePrefixToRoot:l}=Ce();return r.jsxs("div",{className:"LocatorCard",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(nt,{className:"Link--underlineInverse text-brand-primary",href:i?l+i:"",children:r.jsx("h3",{className:"Heading Heading--sub pb-2 sm:pb-4",children:n.line1?n.line1:n.city})}),r.jsx(ve,{...e,className:"hidden sm:flex"})]}),a&&r.jsx("div",{className:"pb-2 sm:pb-4",children:r.jsx(Je,{dayOfWeekTemplate:()=>null,hours:a,separatorTemplate:()=>r.jsx("span",{className:"bullet"})})}),r.jsx("div",{children:n.line1}),r.jsx(ve,{...e,className:"sm:hidden"})]})},ve=e=>{const{className:t,result:s,useKilometers:n=!1}=e,{distanceFromFilter:a}=s;return a?r.jsx("div",{className:B("whitespace-nowrap pt-2 sm:pt-0",t),children:`${Tt(a,n)} ${n?"km":"mi"}`}):null};function Tt(e,t){return t?(e/1e3).toFixed(2):(e/1609.344).toFixed(2)}function _t(e){return je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}}]})(e)}function Et(e){return je({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)}const Ot=()=>{const e=$(c=>c),{relativePrefixToRoot:t}=Ce(),[s,n]=d.useState(!1),{results:a}=Q(),i=d.useMemo(()=>At(e,a.length),[e,a.length]),l=r.jsx("div",{style:{marginTop:"15px"},children:r.jsxs("span",{className:"mt-10",children:["Use our locator to find a location near you or"," ",r.jsx("a",{href:t+"index.html",className:"Link--underline",children:"browse our directory"}),"."]})});return!s&&e.query.queryId&&!e.searchStatus.isLoading&&n(!0),r.jsx("div",{className:"mr-4",children:s?i:l})};function At(e,t){var n;let s="";if((n=e.filters.static)!=null&&n.length){const a=e.filters.static.find(i=>i.selected&&i.filter.kind==="fieldValue"&&rt(i.filter)&&i.displayName)??null;a!=null&&a.displayName&&(s=a.displayName)}return s?t===0?`No locations found near "${s}".`:t===1?`${t} location near "${s}".`:`${t} locations near "${s}".`:t===0?"No locations found.":t===1?`${t} location found.`:`${t} locations found.`}function Ne(e={}){const t=e;return t.matcher===J.Between&&we(t.value)}function we(e){return typeof e=="object"&&!!e&&("start"in e||"end"in e)}function Lt(e){return e.options.length>0&&typeof e.options[0].value=="string"}function Ie(e){return e.options.length>0&&e.options.some(t=>Ne(t))}function Rt(e,t){return!(e.fieldId!==t.fieldId||e.matcher!==t.matcher||JSON.stringify(e.value)!==JSON.stringify(t.value))}function Fe(e,t){return t.find(s=>{const{displayName:n,...a}=s;return Rt(a,e)})}function Mt(e,t){const s=ye(e),n=ye(t);return{...s!==void 0&&{start:{matcher:J.GreaterThanOrEqualTo,value:s}},...n!==void 0&&{end:{matcher:J.LessThanOrEqualTo,value:n}}}}function ye(e){const t=parseFloat(e);if(!isNaN(t))return t}function ke(e,t){var n,a,i;const s=(i=(a=(n=e.state)==null?void 0:n.filters)==null?void 0:a.static)==null?void 0:i.filter(l=>Ne(l)&&l.selected===!0&&(!t||t.has(l.fieldId)));s==null||s.forEach(l=>{e.setFilterOption({...l,selected:!1})})}function Pt(e){var s;const t=((s=e.state.filters.facets)==null?void 0:s.filter(n=>Ie(n)&&n.options.some(a=>a.selected)))??[];return new Set(t.map(n=>n.fieldId))}function Dt(e){return e.map(t=>{const{filter:{kind:s,...n},...a}=t;if(s==="fieldValue")return{...a,...n}}).filter(t=>!!t)}async function le(e){const t=e.state.meta.searchType===Ye.Vertical;try{t?e.executeVerticalQuery():e.executeUniversalQuery()}catch(s){console.error(`Error occured executing a ${t?"vertical":"universal"} search.
`,s)}}const Se=d.createContext(null);function V(){const e=d.useContext(Se);if(e===null)throw new Error("Tried to use FiltersContext when none exists.");return e}function Bt({children:e,className:t="w-full",searchOnChange:s=!0}){const n=R(),a=$(o=>o.filters.facets),i=d.useMemo(()=>a??[],[a]),l=d.useMemo(()=>i.flatMap(o=>o.options.map(u=>({fieldId:o.fieldId,value:u.value,matcher:u.matcher,selected:u.selected,displayName:u.displayName}))),[i]),c=d.useMemo(()=>({selectFilter(o){if(typeof o.value=="object"&&!we(o.value)){console.error("Facets only support string, number, boolean, and NumberRangeValue. Found the following object value instead:",o.value);return}const u={matcher:o.matcher,value:o.value};n.setFacetOption(o.fieldId,u,o.selected)},applyFilters(){s&&(n.setOffset(0),ke(n,Pt(n)),le(n))},filters:l}),[n,l,s]);return r.jsx("div",{className:t,children:r.jsx(Se.Provider,{value:c,children:e==null?void 0:e(i)})})}const Te=d.createContext(null);function G(){const e=d.useContext(Te);if(e===null)throw new Error("Tried to use FilterGroupContext when none exists.");return e}const Ht={label:"text-neutral text-sm font-normal cursor-pointer",label___disabled:"opacity-50 cursor-not-allowed",input:"w-3.5 h-3.5 form-checkbox cursor-pointer border border-gray-300 rounded-sm text-primary focus:ring-primary",input___disabled:"border-gray-200 bg-gray-50 cursor-not-allowed",container:"flex items-center",optionContainer:"flex items-center space-x-3 peer",tooltipContainer:"invisible peer-hover:visible relative -right-5 -top-5",tooltip:"absolute z-10 left-0 -top-0.5 whitespace-nowrap rounded shadow-lg p-3 text-sm bg-neutral-dark text-white"};function $t(e){const{fieldId:t,isOptionsDisabled:s}=G(),{value:n,matcher:a=J.Equals,selectedByDefault:i=!1,displayName:l=e.value,resultsCount:c}=e,o=Ht,u=at(),{selectFilter:f,filters:g,applyFilters:m}=V(),h=d.useCallback(_=>{f({matcher:a,fieldId:t,value:n,displayName:typeof l=="string"?l:void 0,selected:_}),m()},[m,t,l,f,n,a]),x=d.useCallback(_=>{h(_.target.checked)},[h]),p=d.useMemo(()=>({fieldId:t,matcher:a,value:n}),[t,n,a]),y=Fe(p,g);d.useEffect(()=>{!y&&i&&f({...p,displayName:typeof l=="string"?l:void 0,selected:!0})},[l,f,i,y,p]);const F=y?y.selected:!1,k=c?`${l} (${c})`:l,N=B(o.input,{[o.input___disabled]:s}),S=B(o.label,{[o.label___disabled]:s});return r.jsxs("div",{className:o.container,children:[r.jsxs("div",{className:o.optionContainer,children:[r.jsx("input",{type:"checkbox",id:u,checked:F,className:N,onChange:x,disabled:s}),r.jsx("label",{className:S,htmlFor:u,children:k})]}),s&&r.jsx("div",{className:o.tooltipContainer,children:r.jsx("div",{className:o.tooltip,children:"Clear the range to select options."})})]})}function _e(e){const{className:t="space-y-3",children:s}=e,{getCollapseProps:n}=G();return r.jsx("div",{className:t,...n(),children:s})}function Vt(e){const{className:t="text-sm form-input bg-white h-9 w-full outline-none p-2 mb-2 rounded-md border border-gray-300 focus:ring-primary focus:ring-0 text-neutral-dark placeholder:text-neutral",placeholder:s="Search here..."}=e,{searchValue:n,setSearchValue:a}=G(),i=d.useCallback(l=>{a(l.target.value)},[a]);return r.jsx("input",{className:t,type:"text",placeholder:s,value:n,onChange:i})}function Ee(e){const{children:t,defaultExpanded:s=!0,fieldId:n}=e,[a,i]=d.useState(""),[l,c]=d.useState(!1),{getCollapseProps:o,getToggleProps:u,isExpanded:f}=Ct({defaultExpanded:s}),g=d.useMemo(()=>({fieldId:n,searchValue:a,setSearchValue:i,getCollapseProps:o,getToggleProps:u,isExpanded:f,isOptionsDisabled:l,setIsOptionsDisabled:c}),[n,o,u,f,a,l]);return r.jsx(Te.Provider,{value:g,children:t})}function Gt({className:e}){return r.jsx("svg",{viewBox:"0 0 12 8",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:e,children:r.jsx("path",{d:"M1.33341 6.5L6.00008 1.83333L10.6667 6.5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}const Oe={label:"text-neutral-dark text-sm font-medium text-left"};function qt({label:e}){const{isExpanded:t,getToggleProps:s}=G(),n=B("w-3 text-gray-400",{"transform rotate-180":!t});return r.jsxs("button",{className:"w-full flex justify-between items-center mb-4",...s(),children:[r.jsx("div",{className:Oe.label,children:e}),r.jsx(Gt,{className:n})]})}const Ae=it({classGroups:{form:["input","checkbox","textarea","select","multiselect","radio"].map(e=>"form-"+e)}});function Le({label:e,customCssClasses:t,collapsible:s=!0}){const n=d.useMemo(()=>({label:t==null?void 0:t.titleLabel}),[t]);return r.jsx(d.Fragment,{children:s?r.jsx(qt,{label:e,customCssClasses:n}):e&&r.jsx("div",{className:Ae("mb-4",Oe.label,n.label),children:e})})}function Re({fieldId:e,filterOptions:t,title:s,collapsible:n=!0,defaultExpanded:a=!0,searchable:i,customCssClasses:l={},showMoreLimit:c=t.length,children:o}){return r.jsxs(Ee,{fieldId:e,defaultExpanded:!n||a,children:[r.jsx(Le,{label:s,customCssClasses:l,collapsible:n}),r.jsxs(_e,{children:[i&&r.jsx(Vt,{}),r.jsx(zt,{filterOptions:t,showMoreLimit:c}),o]})]})}function zt({filterOptions:e,showMoreLimit:t}){const s=ht(),{searchValue:n}=G(),a=u=>s.isCloseMatch(u.displayName||u.value.toString(),n);let i=e.filter(a).map(u=>d.createElement($t,{...u,key:u.displayName||u.value.toString()}));const l=i.length>t,[c,o]=d.useState(!l);return i=i.slice(0,c?i.length:t),r.jsxs(r.Fragment,{children:[i,l&&r.jsx("button",{className:"text-primary py-1 text-sm",onClick:()=>o(!c),children:c?"Show Less":"Show More"})]})}function Ut({fieldId:e,label:t,transformOptions:s,facet:n,showMoreLimit:a=10,showOptionCounts:i=!0,...l}){const c=n.options||[],o=s?s(c)||[]:c;return r.jsx(Re,{fieldId:e,filterOptions:o.map(u=>i?{...u,resultsCount:u.count}:u),title:t||n.displayName,showMoreLimit:a,searchable:(n==null?void 0:n.options.length)>a,...l})}function Kt({className:e}){return r.jsx("div",{className:Ae("w-full h-px bg-gray-200 my-4",e)})}function Wt(){return r.jsx("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M9.99955 7V9M9.99955 13H10.0095M3.07134 17H16.9277C18.4673 17 19.4296 15.3333 18.6598 14L11.7316 2C10.9618 0.666667 9.0373 0.666667 8.2675 2L1.33929 14C0.569492 15.3333 1.53174 17 3.07134 17Z",stroke:"#B91C1C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}const Jt={rangeInputContainer:"flex flex-col",input:"w-full h-9 form-input cursor-pointer border rounded-md focus:ring-0 text-neutral-dark text-sm text-right appearance-none leading-9",input___withPrefix:"pl-[2.5rem]",input___withoutPrefix:"px-2",input___disabled:"bg-gray-50 placeholder:text-neutral-light cursor-not-allowed",input___enabled:"placeholder:text-neutral",input___valid:"border-gray-300 focus:border-primary",input___invalid:"border-red-700 focus:border-red-700",inputContainer:"relative",inputRowContainer:"flex flex-row items-center space-x-3 group",buttonsContainer:"flex flex-row items-center justify-between pt-2",inputPrefix:"absolute left-2 top-2 text-sm",inputPrefix___disabled:"text-neutral-light cursor-not-allowed",inputPrefix___enabled:"text-neutral",applyButton:"text-sm text-primary font-medium",clearButton:"text-sm text-neutral font-medium",tooltipContainer:"invisible group-hover:visible relative -top-6",tooltip:"absolute z-10 left-0 whitespace-nowrap rounded shadow-lg p-3 text-sm bg-neutral-dark text-white",invalidMessage:"pl-3 text-sm text-red-700",invalidRowContainer:"pt-2 flex flex-row items-center"};function Yt(e){const{filters:t}=V(),{fieldId:s,setIsOptionsDisabled:n}=G(),{getFilterDisplayName:a=Zt,inputPrefix:i}=e,l=Jt,c=R(),[o,u]=d.useState(""),[f,g]=d.useState(""),m=$(b=>b.filters.static),h=d.useMemo(()=>Dt(m??[]),[m]),x=t.some(b=>b.selected&&b.fieldId===s),p=d.useMemo(()=>({kind:"fieldValue",fieldId:s,matcher:J.Between,value:Mt(o,f)}),[s,f,o]),y=Qt(p.value),F=Fe(p,h),k=(F==null?void 0:F.selected)===!0,N=!!(o||f),S=N&&!k;d.useEffect(()=>{n(N)},[N,n]);const _=d.useCallback(b=>{var E;const w=(E=b==null?void 0:b.target)==null?void 0:E.value;be(w)&&u(w)},[]),T=d.useCallback(b=>{var E;const w=(E=b==null?void 0:b.target)==null?void 0:E.value;be(w)&&g(w)},[]),q=d.useCallback(()=>{if(!p.value.start&&!p.value.end||!y)return;const b=a(p.value);ke(c,new Set([s])),c.setFilterOption({filter:p,selected:!0,displayName:b}),c.setOffset(0),le(c)},[c,s,a,y,p]),X=d.useCallback(()=>{const b=a(p.value);c.setFilterOption({filter:p,selected:!1,displayName:b}),u(""),g(""),c.setOffset(0),le(c)},[c,a,p]),Y=B(l.input,{[l.input___withPrefix]:!!i,[l.input___withoutPrefix]:!i,[l.input___disabled]:x,[l.input___enabled]:!x,[l.input___invalid]:!y,[l.input___valid]:y}),O=B(l.inputPrefix,{[l.inputPrefix___disabled]:x,[l.inputPrefix___enabled]:!x});function z(b,w,E){return r.jsxs("div",{className:l.inputContainer,children:[i&&r.jsx("span",{className:O,"aria-hidden":"true",children:i}),r.jsx("input",{type:"text",inputMode:"decimal",value:b,placeholder:E,disabled:x,className:Y,onChange:w})]})}return r.jsxs("div",{className:l.rangeInputContainer,children:[r.jsxs("div",{className:l.inputRowContainer,children:[z(o,_,"Min"),r.jsx("div",{className:"w-2.5 text-sm text-neutral",children:"-"}),z(f,T,"Max"),x&&r.jsx("div",{className:l.tooltipContainer,children:r.jsx("div",{className:l.tooltip,children:"Unselect an option to enter in a range."})})]}),!y&&r.jsxs("div",{className:l.invalidRowContainer,children:[r.jsx(Wt,{}),r.jsx("div",{className:l.invalidMessage,children:"Invalid range"})]}),N&&r.jsxs("div",{className:l.buttonsContainer,children:[r.jsx("button",{className:l.clearButton,onClick:X,children:"Clear min and max"}),S&&r.jsx("button",{className:l.applyButton,onClick:q,children:"Apply"})]})]})}function Zt(e){const t=e.start,s=e.end;return t&&s?`${t.value} - ${s.value}`:t&&!s?`Over ${t.value}`:s&&!t?`Up to ${s.value}`:""}function be(e){return new RegExp(/^\d*\.?\d*$/).test(e)}function Qt(e){return e.start&&e.end?e.start.value<=e.end.value:!0}const Xt=r.jsx(r.Fragment,{children:"$"});function es({fieldId:e,label:t,transformOptions:s,getFilterDisplayName:n,facet:a,showMoreLimit:i=10,showOptionCounts:l=!1,inputPrefix:c=Xt,...o}){const u=a.options||[],f=s?s(u)||[]:u;return r.jsx(Re,{fieldId:e,filterOptions:f.map(g=>l?{...g,resultsCount:g.count}:g),title:t||a.displayName,showMoreLimit:i,searchable:(a==null?void 0:a.options.length)>i,...o,children:r.jsx(Yt,{getFilterDisplayName:n,inputPrefix:c})})}function ts(e,t){return d.useMemo(()=>ss(e,t),[t,e])}function ss(e,t){const s=(e==null?void 0:e.options.map(a=>{const i=a.displayName.split(t).map(l=>l.trim());return{...a,displayNameTokens:i}}).sort((a,i)=>a.displayNameTokens.length-i.displayNameTokens.length))||[],n={};return s.forEach(a=>{const{displayNameTokens:i,displayName:l}=a;let c=n,o;for(const f of i.slice(0,-1)){if(!(f in c)){console.error(`Error parsing hierarchical facet option "${l}" at token "${f}". Current tree:`,JSON.stringify(n));return}a.selected&&(c[f].hasSelectedChild=!0),o=c[f],c=c[f].childTree}const u=i[i.length-1];c[u]={selected:a.selected,displayNameTokens:i,lastDisplayNameToken:u,facetOption:{value:a.value,matcher:a.matcher},hasSelectedChild:!1,childTree:{},parentNode:o}}),n}const ns=">",P={treeContainer:"flex flex-col items-start",allCategoriesOption___active:"font-semibold mb-2 text-sm",allCategoriesOption___inactive:"mb-2 text-sm",availableOption__active:"font-semibold ml-4 mb-2 text-sm",availableOption__inactive:"ml-4 mb-2 text-sm",parentCategory:"mb-2 text-sm",currentCategory:"font-semibold mb-2 text-sm",showMoreButton:"ml-4 text-sm font-medium text-primary"};function rs({facet:e,delimiter:t=ns,showMoreLimit:s=4}){const n=ts(e,t),[a,i]=d.useState(!1),l=d.useCallback(()=>i(!1),[]),c=d.useCallback(()=>{i(!a)},[a]);function o(){let h=n;const x=[u()];for(;h;){const p=Object.values(h),y=p.find(S=>S.selected),F=y&&Object.values(y.childTree).length===0,k=p.find(S=>S.hasSelectedChild);if(!y&&!k||F){x.push(...f(p)),p.length>s&&x.push(g());break}const N=y??k;if(!N)break;x.push(m(N,e.fieldId)),h=N.childTree}return x}function u(){return r.jsx(as,{activeClassName:P.allCategoriesOption___active,inactiveClassName:P.allCategoriesOption___inactive,facet:e,resetShowMore:l},"_AllCategories")}function f(h){return(a?h:h.slice(0,s)).map(p=>r.jsx(is,{activeClassName:P.availableOption__active,inactiveClassName:P.availableOption__inactive,fieldId:e.fieldId,currentNode:p,resetShowMore:l,siblingNodes:h.filter(y=>y!==p)},p.lastDisplayNameToken))}function g(){return r.jsx(cs,{className:P.showMoreButton,isShowingMore:a,toggleShowMore:c},"_ShowMoreButton")}function m(h,x){const p={key:h.lastDisplayNameToken,resetShowMore:l,selectedNode:h,fieldId:x};return h.hasSelectedChild?r.jsx(ls,{className:P.parentCategory,...p}):r.jsx(os,{className:P.currentCategory,...p})}return r.jsx("div",{className:P.treeContainer,children:o()})}function as({facet:e,inactiveClassName:t,activeClassName:s,resetShowMore:n}){const{applyFilters:a,selectFilter:i}=V(),l=d.useCallback(()=>{e.options.filter(c=>c.selected).forEach(c=>i({...c,fieldId:e.fieldId,selected:!1})),a(),n()},[a,e.fieldId,e.options,n,i]);return e.options.find(c=>c.selected)?r.jsx("button",{className:t,onClick:l,children:"All Categories /"}):r.jsx("div",{className:s,children:"All Categories"})}function is(e){var h;const{fieldId:t,currentNode:s,activeClassName:n,inactiveClassName:a,resetShowMore:i,siblingNodes:l}=e,{applyFilters:c,selectFilter:o}=V(),{selected:u,lastDisplayNameToken:f,facetOption:g}=s,m=d.useCallback(()=>{var p;l.filter(y=>y.selected).forEach(y=>o({...y.facetOption,selected:!1,fieldId:t})),o({...g,selected:!u,fieldId:t});const x=(p=s.parentNode)==null?void 0:p.facetOption;x&&o({...x,selected:u,fieldId:t}),c(),i()},[c,(h=s.parentNode)==null?void 0:h.facetOption,g,t,i,o,u,l]);return r.jsx("button",{className:u?n:a,onClick:m,children:f})}function ls({fieldId:e,selectedNode:t,className:s,resetShowMore:n}){const{applyFilters:a,selectFilter:i}=V(),l=d.useCallback(o=>{const u=o.childTree;Object.values(u).forEach(f=>{i({...f.facetOption,selected:!1,fieldId:e}),l(f)})},[e,i]),c=d.useCallback(()=>{i({...t.facetOption,selected:!0,fieldId:e}),l(t),a(),n()},[a,l,e,n,i,t]);return r.jsx("button",{className:s,onClick:c,children:t.lastDisplayNameToken+" /"})}function os({fieldId:e,selectedNode:t,className:s,resetShowMore:n}){var c;const{applyFilters:a,selectFilter:i}=V(),l=d.useCallback(()=>{var u;i({...t.facetOption,selected:!1,fieldId:e});const o=(u=t.parentNode)==null?void 0:u.facetOption;o&&i({...o,selected:!0,fieldId:e}),a(),n()},[a,e,n,i,t.facetOption,(c=t.parentNode)==null?void 0:c.facetOption]);return r.jsx("button",{className:s,onClick:l,children:t.lastDisplayNameToken})}function cs({className:e,isShowingMore:t,toggleShowMore:s}){return r.jsx("button",{className:e,onClick:s,children:t?"Show less":"Show more"})}function us({fieldId:e,label:t,transformOptions:s,delimiter:n,facet:a,collapsible:i=!0,defaultExpanded:l=!0,showMoreLimit:c=4}){const o=a.options||[],u=s?s(o)||[]:o;return r.jsxs(Ee,{fieldId:e,defaultExpanded:!i||l,children:[r.jsx(Le,{label:t||a.displayName,collapsible:i}),r.jsx(_e,{children:r.jsx(rs,{facet:{...a,options:u},delimiter:n,showMoreLimit:c})})]})}function ds(e){const{searchOnChange:t,onlyRenderChildren:s=!1,children:n,hierarchicalFieldIds:a=[],excludedFieldIds:i=[],collapsible:l,showOptionCounts:c}=e,o=new Map,u=[];return n&&(Array.isArray(n)?n:[n]).filter(f=>{var g;return(g=f==null?void 0:f.props)==null?void 0:g.fieldId}).forEach(f=>{o.set(f.props.fieldId,f),u.push(f.props.fieldId)}),r.jsx("div",{children:r.jsx(Bt,{searchOnChange:t,children:f=>{if(!(f!=null&&f.length))return;s||f.forEach(m=>{u.includes(m.fieldId)||u.push(m.fieldId)});const g=new Map;return f.forEach(m=>g.set(m.fieldId,m)),u.filter(m=>!i.includes(m)&&g.get(m).options.length>0&&(!s||o.has(m))).map((m,h)=>{const x=g.get(m);return r.jsxs(d.Fragment,{children:[r.jsx(fs,{facet:x,hierarchicalFieldIds:a,collapsible:l,showOptionCounts:c}),h<f.length-1&&r.jsx(Kt,{})]},x.fieldId)})}})})}function fs({facet:e,hierarchicalFieldIds:t,collapsible:s,showOptionCounts:n}){const a={fieldId:e.fieldId,label:e.displayName,collapsible:s,showOptionCounts:n};switch(ps(e,t)){case"NUMERICAL":return r.jsx(es,{facet:e,...a});case"HIERARCHICAL":return r.jsx(us,{facet:e,...a});case"STANDARD":default:return r.jsx(Ut,{facet:e,...a})}}function ps(e,t=[]){return t.includes(e.fieldId)?"HIERARCHICAL":Lt(e)?"STANDARD":Ie(e)?"NUMERICAL":"STANDARD"}const Me=()=>{var n;const t=(n=R().state.filters.facets)==null?void 0:n.filter(a=>a.options.filter(i=>i.selected).length),s=t==null?void 0:t.map(a=>a.options.filter(i=>i.selected).map((i,l)=>r.jsx(hs,{facetFieldId:a.fieldId,option:i},l)));return s!=null&&s.length?r.jsx("div",{className:"mb-4 sm:mb-0 sm:mt-4",children:r.jsx("div",{className:"flex overflow-x-auto -mx-1.5 pb-3 -mb-3 -mr-4 sm:mr-0",children:s})}):null},hs=e=>{const t=R(),s=()=>{t.setFacetOption(e.facetFieldId,e.option,!1),oe(t)};return r.jsxs("button",{className:"bg-brand-gray-100 hover:bg-brand-gray-200 rounded-3xl p-2.5 text-brand-primary text-sm flex items-center mx-1.5 whitespace-nowrap",onClick:s,children:[r.jsx(Et,{height:8,width:8,className:"mr-2"}),r.jsx("span",{children:e.option.displayName})]})},ms=e=>{const t=ce("sm"),s=R(),n=s.state.filters.facets,a=()=>{s.resetFacets(),oe(s),e.setFiltersOpen(!1)};return r.jsxs("div",{className:"Locator-facetsModal",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-bold text-brand-primary",children:"Refine Your Search"}),r.jsx("button",{className:"ml-auto",onClick:()=>e.setFiltersOpen(!1),children:r.jsx(Ze,{className:"text-brand-primary"})})]}),!t&&r.jsx(Me,{}),r.jsx("div",{className:"h-px bg-brand-gray-300 w-screen -mx-4 mb-4 sm:mx-0 sm:w-full"}),r.jsx("div",{className:"overflow-y-auto",children:r.jsx(ds,{collapsible:!1,searchOnChange:!0,showOptionCounts:!0})}),r.jsx("div",{className:"text-center mt-6",children:r.jsx("button",{className:"Link Link--primary disabled:text-brand-gray-400",onClick:a,disabled:!(n!=null&&n.filter(i=>i.options.filter(l=>l.selected).length).length),children:"Clear All"})})]})},xs=()=>{const e=ce("sm"),[t,s]=d.useState(!1);return d.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(!1)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[]),r.jsxs("div",{className:"shadow-brand-shadow py-4 px-6",children:[t&&!e&&r.jsx("div",{className:"fixed top-0 left-0 h-screen w-screen opacity-30 bg-black z-10",onClick:()=>s(!1)}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ot,{}),r.jsx(gs,{filtersOpen:t,setFiltersOpen:s})]}),e&&r.jsx(Me,{}),t&&r.jsx(ms,{setFiltersOpen:s})]})},gs=e=>{const s=R().state.filters.facets,n=!!(s!=null&&s.filter(i=>i.options.length).length),a=s==null?void 0:s.map(i=>i.options.filter(l=>l.selected).length).reduce((i,l)=>i+l,0);return n?r.jsxs("button",{className:"flex items-center ml-auto",onClick:()=>e.setFiltersOpen(!e.filtersOpen),children:[r.jsx("span",{className:"text-brand-primary mr-2.5 whitespace-nowrap",children:`Filters ${a?`(${a})`:""}`}),r.jsx(_t,{className:"text-brand-primary"})]}):null};const vs=e=>{const{CardComponent:t}=e,{results:s}=Q();return r.jsx("div",{className:"ResultList bg-slate-600",children:s==null?void 0:s.map(n=>r.jsx(ys,{CardComponent:t,result:n},n.id||n.index))})};function ys(e){const{CardComponent:t,result:s}=e,{selectedId:n,setSelectedId:a,hoveredId:i,setHoveredId:l,focusedId:c,setFocusedId:o}=Q(),u=d.useRef(null);return d.useEffect(()=>{var f;n===s.id&&((f=u.current)==null||f.scrollIntoView({behavior:"smooth",block:"nearest"}))},[n,s.id]),r.jsx("div",{ref:u,className:B("ResultList-item","bg-slate-600",{"is-selected":n===s.id},{"is-hovered":i===s.id||c===s.id}),onClick:()=>a(s.id??""),onFocus:()=>o(s.id??""),onBlur:()=>o(""),onMouseEnter:()=>l(s.id??""),onMouseLeave:()=>l(""),children:r.jsx(t,{result:s})})}const bs=e=>{const{selectedId:t,setSelectedId:s,hoveredId:n,setHoveredId:a,focusedId:i,setFocusedId:l}=Q(),{coordinate:c,id:o,index:u}=e,f=o===t,g=o===i,m=o===n,h=He();return d.useEffect(()=>{t===o&&(h.getBounds().contains(new Qe.Coordinate(c))||h.setCenter(c,!0))},[t,o,c,h]),r.jsx($e,{coordinate:c,id:o,onClick:s,onFocus:(x,p)=>l(x?p:""),onHover:(x,p)=>a(x?p:""),zIndex:f?1:m||g?2:0,children:r.jsx(Cs,{backgroundColor:f||m||g?"#0C5ECB":"#0f70f0",index:u,height:f?57:49,width:f?33:29})})},Cs=e=>{const{backgroundColor:t,height:s,index:n,textColor:a,width:i}=e;return r.jsxs("svg",{fill:"none",height:s,viewBox:"0 0 29 49",width:i,xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"m14.5.5c4 0 7.5028 1.49535 10.0037 3.99628 2.501 2.50093 3.9963 6.00372 3.9963 10.00372 0 4.3786-2.3969 7.7986-5.1195 11.7503-3.7142 5.391-8.0637 11.7263-8.3618 22.4575-1.3355-10.7312-5.68504-17.0665-9.39921-22.4575-2.72261-3.9517-5.11949-7.3717-5.11949-11.7503 0-4 1.49535-7.50279 3.99628-10.00372s6.00372-3.99628 10.00372-3.99628z",fill:t||"#0f70f0",stroke:"#000",strokeOpacity:".5"}),r.jsx("text",{x:"50%",y:"40%",fontSize:"14px",fontWeight:"bold",dominantBaseline:"middle",textAnchor:"middle",fill:a||"#FFFFFF",children:n})]})},js=e=>{const{displayAllOnNoResults:t=!1,allResultsOnLoad:s=!1,placeholderText:n,subTitle:a,title:i}=e,l=ft(),[c,o]=d.useState(""),[u,f]=d.useState(""),[g,m]=d.useState(""),h=R(),x=$(T=>T.searchStatus.isLoading),p=ce("sm"),[y,F]=d.useState(!1),[k,N]=d.useState(!1),S=d.useCallback(()=>N(!0),[N]);lt(k,S),ot(k),d.useEffect(()=>{o(""),f(""),m("")},[h.state.query.queryId]);const _=Nt(t,s,()=>{F(!0)});return r.jsx(wt,{value:{results:_,selectedId:c,setSelectedId:o,focusedId:u,setFocusedId:f,hoveredId:g,setHoveredId:m},children:r.jsxs("div",{className:"Locator",children:[(!k||x||s&&!y)&&r.jsx(ct,{}),r.jsxs("div",{className:"Locator-content",children:[r.jsx(kt,{title:i,subTitle:a,placeholderText:n}),r.jsx(xs,{}),r.jsx(vs,{CardComponent:St})]}),p&&r.jsx("div",{className:"Locator-map",children:r.jsx(Ve,{provider:Ge,providerOptions:{styles:It},bounds:_.map(T=>T.rawData.yextDisplayCoordinate),padding:{top:100,bottom:200,left:50,right:50},className:"h-full",...l,children:_.map((T,q)=>r.jsx(bs,{coordinate:T.rawData.yextDisplayCoordinate,id:T.rawData.id,index:q+1},T.rawData.id))})})]})})},Ns=({data:e})=>{const{document:t}=e,{c_searchTitle:s,c_searchSubTitle:n,c_searchPlaceholderText:a,_site:i}=t,l=qe(),c=et(i.c_searchExperienceAPIKey??"",t.meta.locale,t.siteDomain);return i.c_searchExperienceAPIKey||console.error("Add the search experience API key to the Site Entity"),r.jsx(r.Fragment,{children:r.jsx(ut,{searcher:c,children:l.name==="browser"&&r.jsx(dt,{children:r.jsx(js,{title:s||"Find a Location",subTitle:n||"Search by city and state or ZIP code",placeholderText:a||"Search by city and state or ZIP code"})})})})},Es=e=>r.jsx(Xe,{data:e,children:r.jsx(Ns,{data:e})});export{Es as S};
